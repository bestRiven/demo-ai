# 模型对比分析：表格模型 vs. 时间序列模型

本项目实现了两种不同的机器学习方法来预测空气质量指数（AQI），以评估哪种方法更适合此业务场景。

- **表格模型 (Tabular Model)**: 将预测问题视为一个标准的回归任务。它使用前一天的天气和空气质量数据（包括我们工程化的7日滑动平均特征）来预测第二天的AQI值。
- **时间序列模型 (Time Series Model)**: 将AQI数据视为一个带有时间依赖性的序列。它专门学习历史数据中的趋势、季节性和其他时间相关模式来进行预测。

## 性能对比

为了进行公平的比较，两个模型都在相同的基础数据集上进行了训练，并在最后14天的数据上进行了评估。评估指标为**均方根误差 (RMSE)**，该值越低表示模型预测越准确。

| 模型类型 | 验证集RMSE (最后14天) | 备注 |
| :--- | :--- | :--- |
| **表格模型** | *请运行 `python ml/train.py` 后填入此值* | 使用了丰富的工程化特征（如滑动平均）。 |
| **时间序列模型** | *请运行 `python ml/train_timeseries.py` 后填入此值* | 自动处理时间依赖性，如趋势和季节性。 |

*注：模型的具体RMSE值取决于每一次训练的随机性和`AutoGluon`找到的最优模型。以上数值需要在您本地运行训练脚本后填写，以获得精确的对比结果。*

## 分析与结论

### 表格模型的优势与劣势

- **优势**:
  1.  **特征灵活性**: 可以轻松地加入各种类型的特征。我们的7日滑动平均就是一个例子，还可以加入节假日信息、社会事件等外部数据。
  2.  **解释性**: 某些模型（如线性模型或树模型）的决策过程相对容易理解，有助于分析哪些因素对AQI影响最大。
  3.  **成熟稳定**: 回归模型是数据科学中最成熟、应用最广泛的技术之一。

- **劣势**:
  1.  **时间依赖性捕捉不足**: 虽然我们通过加入`weekday`, `month`等时间特征来帮助模型理解时间，但它本身并不能像时间序列模型那样系统地、自动地处理趋势和季节性变化。

### 时间序列模型的优势与劣势

- **优势**:
  1.  **专业性**: 专为时间序列数据设计，能更有效地捕捉数据中的自相关性、趋势和季节性模式。
  2.  **自动化**: AutoGluon的时间序列模型能自动进行复杂的时间序列特征工程（如滞后项、傅里叶特征等），减少了手动工作。
  3.  **多步预测**: 非常适合进行未来多天的连续预测（例如，预测未来7天的AQI趋势）。

- **劣势**:
  1.  **外部特征集成较复杂**: 虽然可以加入已知的未来外部变量（known future covariates），但集成方式比表格模型要复杂一些。

## 推荐建议

- **对于初创阶段**: **表格模型**是一个绝佳的起点。它实现简单、快速，并且通过巧妙的特征工程（如我们所做的）可以达到非常好的效果。它也更容易解释，便于业务方理解。
- **对于成熟阶段和更高精度要求**: 当积累了更多的数据，并且需要进行更长期的、更精确的预测时，**时间序列模型**通常会展现出更强的威力。建议在业务进入稳定期后，投入资源重点研发和调优时间序列模型。

**最终结论**: 建议当前原型保留两种实现方式。在向客户演示时，可以先展示效果良好且易于解释的**表格模型**作为主要方案，然后展示**时间序列模型**作为技术升级和未来演进的方向，体现我们技术选型的前瞻性。 